<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Zero's Blog | iOS学习日志"><meta name="keywords" content="Blog,Learn,Computer Science"><link rel="stylesheet" href="/css/hi.css"><link rel="stylesheet" href="/css/style.css"><title>Command+R</title><script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.hitlolo.com","root":"/","localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"path":"search.json"};
  </script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="grid nav"><div class="row"><div class="col-12 col-md-3 col-md-offset-9"><div class="nav-meta"><a class="nav-meta__name" href="#">Command+R</a><p class="nav-meta__desc">Life doesn't have a ctrl-z. Type wisely.</p></div></div></div><div class="row"><input id="menu-checkbox" type="checkbox" aria-hidden="true"><label id="menu-switcher" role="button" for="menu-checkbox"> </label><div class="col-12 col-md-3 col-md-offset-9 nav-menu"><ol class="nav-menu__list"><li class="nav-menu__item"><a href="/"><i class="icofont-home"></i>主页</a></li><li class="nav-menu__item"><a href="/about/"><i class="icofont-beard"></i>关于</a></li></ol></div></div></div><div class="grid padding"> <div class="row"><div class="col-12 col-md-9">               <input id="search-checkbox" type="checkbox"><div class="post-container"><div class="post"><h1 class="post-title">关于this</h1><div class="post-meta"><span class="post-meta__date"><i class="icofont-calendar"></i>Nov 26, 2019</span><span class="post-meta__category"><a href="/categories/Node-js/"><i class="icofont-folder-open"></i>Node-js</a><a href="/categories/Node-js/JavaScript/"><i class="icofont-folder-open"></i>JavaScript</a><a href="/categories/Node-js/JavaScript/Essentials/"><i class="icofont-folder-open"></i>Essentials</a></span></div><div class="post-content"><p>今天，从ECMA标准规范的角度来学习this。<br>注意，是ECMA规范，不是具体实现，不同javascript引擎对ECMA规范的具体实现，取决于引擎开发者，但是不管具体实现如何，他们既然都遵循ECMA标准，那么其算法和行为都是一致的。</p>
<h1 id="从-quot-关键字-quot-这3个中文字开始"><a href="#从-quot-关键字-quot-这3个中文字开始" class="headerlink" title="从&quot;关键字&quot;这3个中文字开始"></a>从&quot;关键字&quot;这3个中文字开始</h1><p>每一种编程语言都有关键字，如数据类型int，float，如结构控制if，else，for，如内存分配new。编译器，或解释器在解析到关键字时会将其转译为语言相关或平台相关的特定功能。<br>如变量类型关键字转译为分配特定的数据类型，如结构控制关键字转译为执行相应的控制结构，如new关键字转译为执行内存分配和对象初始化等操作。</p>
<p><code>this</code>是javascript中的一个关键字。 既然是关键字，就意味着javascript引擎，在解释<code>this</code>时会将其转译为该关键字的具体实现。<br>更确切的说，当解释器遇到：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>;</span><br></pre></td></tr></table></figure>
<p>会执行的是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ResolveThisBinding();</span><br></pre></td></tr></table></figure>
<p>当解释器遇到：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.bar;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>会执行的是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ResolveThisBinding().bar;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="问题来了，ResolveThisBinding-是什么？"><a href="#问题来了，ResolveThisBinding-是什么？" class="headerlink" title="问题来了，ResolveThisBinding()是什么？"></a>问题来了，<code>ResolveThisBinding()</code>是什么？</h2><p><code>ResolveThisBinding()</code>是javascript引擎中执行上下文(Execution Context)规范的一个抽象操作。执行的操作是从当前执行上下文(running execution context)的词法环境(LexicalEnvironment)中取出this。<br>伪代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ResolveThisBinding</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Let envRec be GetThisEnvironment().</span><br><span class="line">    Return ? envRec.GetThisBinding().</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="问题又来了，Execution-Context是什么？"><a href="#问题又来了，Execution-Context是什么？" class="headerlink" title="问题又来了，Execution Context是什么？"></a>问题又来了，<code>Execution Context</code>是什么？</h2><p>跟其他程序语言一样，javascript也是以调用栈（call-stack）的逻辑形式进行函数调用。<br>不同的是，javascript调用栈中的单元对象是Execution Context。<br><a target="_blank" rel="noopener" href="https://tc39.es/ecma262/#sec-execution-contexts"><code>Execution Context</code></a>是引擎中的一个内部抽象数据结构，其与函数是一一对应的，每一个函数在调用时都会创建一个对应的执行上下文execution context，用来记录该函数调用的runtime状态和该函数对应的数据。<br>其中就包括记录函数变量和标示符信息的<code>Environment</code>属性，另外<code>Execution Context</code>也有自己的方法，从概念上看，执行上下文基本是这样一个抽象对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ExecutionContext = &#123;</span><br><span class="line">    state               <span class="comment">//当前代码的执行状态code evaluation state </span></span><br><span class="line">    <span class="built_in">Function</span>,           <span class="comment">//执行上下文对应的函数对象            </span></span><br><span class="line">    LexicalEnvironment, <span class="comment">//执行上下文词法环境的环境记录</span></span><br><span class="line">    VariableEnvironment,<span class="comment">//执行上下文变量环境的环境记录</span></span><br><span class="line">    PrivateEnvironment,</span><br><span class="line">    Reaml,              <span class="comment">//当前javascript程序的领域，上下文通过此引用访问领域资源</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">ResolveThisBinding</span>(<span class="params"></span>);//解析绑定的<span class="title">this</span></span></span><br><span class="line"><span class="function">    <span class="title">function</span> <span class="title">GetThisEnvironment</span>(<span class="params"></span>);//查找绑定<span class="title">this</span>的环境记录</span></span><br><span class="line"><span class="function">    ...</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<p>其中一个方法就是上文中的解析绑定的this：<code>ResolveThisBinding()</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ResolveThisBinding</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Let envRec be GetThisEnvironment().</span><br><span class="line">    Return ? envRec.GetThisBinding().</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用栈通过出/入栈的方式来管理函数执行顺序。<br>每次调用一个函数，Javascript引擎都会为该函数创建一个执行上下文（execution context），然后压入执行上下文栈（execution context stack）中。而函数返回时，Javascript引擎会将执行上下文栈栈顶的执行上下文execution context弹出。<br>调用栈的底部永远都是全局上下文(global context)，这个全局上下文对应的函数是Javascript运行时生成一个匿名的函数<code>&lt;main&gt;</code>。</p>
<p>现在再来看<code>ResolveThisBinding()</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ResolveThisBinding</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Let envRec be GetThisEnvironment().</span><br><span class="line">    Return ? envRec.GetThisBinding().</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其执行的是:<br>    1. 查找绑定this的环境记录（Environment）<br>    2. 返回环境记录绑定的this<br>可见，执行上下文是通过Environment间接获取this，Environment才是持有this的对象。</p>
<p>是的，从功能划分上看，执行上下文只负责函数的状态信息，而函数作用域内关于<em>标识符</em>和变量的一切都委托给了环境记录Environment，this对象也不例外，说到底，关键字this也只是一个特殊的标示符。</p>
<h2 id="ok-那Environment又是什么？"><a href="#ok-那Environment又是什么？" class="headerlink" title="ok, 那Environment又是什么？"></a>ok, 那<code>Environment</code>又是什么？</h2><p>Environment即<a target="_blank" rel="noopener" href="https://tc39.es/ecma262/#sec-environment-records">环境记录Environment Record</a>，<br>环境记录是一个javascript引擎内部的抽象对象结构，其作用是记录<em>标识符</em>与<em>该标示符相对应的值/地址</em>,可以视作一个一对一映射表。<br>这里的标识符指的是变量名称或函数名，而该标示符相对应的变量则是实际变量原始值或者对象/函数的引用地址，<br>环境记录由词法分析器根据代码的词法结构生成。比如代码块（Block），比如函数声明（FunctionDeclaration）。例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="comment">//block</span></span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> y = <span class="number">2</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Environment Record = &#123;</span><br><span class="line">    x : <span class="number">1</span>,</span><br><span class="line">    y : <span class="number">2</span>,</span><br><span class="line">    foo : <span class="xml"><span class="tag">&lt;<span class="name">fun</span>&gt;</span></span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>我们的代码词法结构和作用域一般都是嵌套的，比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此生成的环境记录也是嵌套的，这是通过让内部环境记录持有 [[OuterEnv]]属性来实现:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Global Environment Record = &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        x: <span class="number">1</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    [[OuterEnv]]: <span class="xml"><span class="tag">&lt;<span class="name">null</span>&gt;</span>,</span></span><br><span class="line">    [[GlobalThisValue]]: &lt;globalObject&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">declarative Environment Record = &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        x: 2,</span><br><span class="line">    &#125;,</span><br><span class="line">    [[OuterEnv]]: &lt;GlobalEnvironment&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>环境记录根据作用域不同，分为不同的类型:</p>
<ol>
<li>声明环境记录（declarative Environment Record ）</li>
<li>全局环境记录（global Environment Record）</li>
<li>对象环境记录（object Environment Record）</li>
<li>函数环境记录（function Environment Record）</li>
<li>模块环境记录（module Environment Record）</li>
</ol>
<p>他们之间的结构类似于这样一个继承链（伪代码）：<br>基类：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 环境记录，Environment Record</span></span><br><span class="line">abstract <span class="class"><span class="keyword">class</span> <span class="title">Environment</span> <span class="title">Record</span></span>&#123;</span><br><span class="line">    [[OuterEnv]],       <span class="comment">//指向外部Environment Record或者null.</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> 变量解析(<span class="params"></span>), //相关函数...</span></span><br><span class="line"><span class="function">    <span class="title">function</span> 变量绑定(<span class="params"></span>),</span></span><br><span class="line"><span class="function">    ...  </span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<p>子类：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明环境记录（declarative Environment Record ），</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> 声明环境记录 <span class="keyword">extends</span> <span class="title">Environment</span> <span class="title">Record</span></span>&#123;</span><br><span class="line">    &#123;<span class="attr">identifier</span> : ref&#125;, <span class="comment">//标示符映射表</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象环境记录（object Environment Record）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span>  对象环境记录 <span class="keyword">extends</span> <span class="title">Environment</span> <span class="title">Record</span></span>&#123;</span><br><span class="line">    &#123;<span class="attr">identifier</span> : ref&#125;, <span class="comment">//标示符映射表</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局环境记录（global Environment Record）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> 全局环境 <span class="keyword">extends</span> <span class="title">Environment</span> <span class="title">Record</span></span>&#123;</span><br><span class="line">    &#123;<span class="attr">identifier</span> : ref&#125;, <span class="comment">//标示符映射表</span></span><br><span class="line">    ...</span><br><span class="line">    [[OuterEnv]] = <span class="literal">null</span>,<span class="comment">//全局环境[[OuterEnv]]指向null</span></span><br><span class="line">    [[GlobalThisValue]],<span class="comment">//global this</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">GetThisBinding</span>(<span class="params"></span>)... ,</span></span><br><span class="line"><span class="function">    ...</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<p>其中声明环境记录declarative Environment Record又有两个子类型：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数环境记录（function Environment Record）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> 函数环境记录 <span class="keyword">extends</span> 声明环境记录</span>&#123;</span><br><span class="line">    [[ThisValue]] ,</span><br><span class="line">    [[ThisBindingStatus]],</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">GetThisBinding</span>(<span class="params"></span>),</span></span><br><span class="line"><span class="function">    <span class="title">function</span> <span class="title">BindThisValue</span>(<span class="params">V</span>),</span></span><br><span class="line"><span class="function">    ...</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">// 模块环境记录（<span class="title">module</span> <span class="title">Environment</span> <span class="title">Record</span>）</span></span><br><span class="line"><span class="function"><span class="title">class</span> 模块环境记录 <span class="title">extends</span> 声明环境记录</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>而此刻，我们只关注，全局环境和函数环境，因为只有他们提供了<code>GetThisBinding()</code>,<br>全局环境拥有额外属性：<code>[[GlobalThisValue]]</code>，其<code>GetThisBinding()</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetThisBinding</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [[GlobalThisValue]]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>函数环境拥有额外属性：<code>[[ThisValue]]</code>,其<code>GetThisBinding()</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetThisBinding</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Assert([[ThisBindingStatus]] !=  lexical); <span class="comment">//箭头函数没有this value</span></span><br><span class="line">    If [[ThisBindingStatus]] == uninitialized  <span class="comment">//this未初始化，抛出引用错误异常</span></span><br><span class="line">        <span class="keyword">throw</span> a <span class="built_in">ReferenceError</span> exception. </span><br><span class="line">    <span class="keyword">return</span> [[ThisValue]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也就是说this的值只有两种情况：</p>
<ol>
<li>全局环境下的<code>[[GlobalThisValue]]</code></li>
<li>函数环境下的<code>[[ThisValue]]</code></li>
</ol>
<p>现在再回过头来看，当解释器遇到全局this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>;</span><br></pre></td></tr></table></figure>
<p>实际是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//this =&gt; ResolveThisBinding() =&gt; GetThisBinding() =&gt; [[GlobalThisValue]]</span></span><br><span class="line">[[GlobalThisValue]];</span><br></pre></td></tr></table></figure>
<p>函数中的this：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.bar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//this =&gt; ResolveThisBinding() =&gt; GetThisBinding() =&gt; [[ThisValue]]</span></span><br><span class="line">    [[ThisValue]].bar;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上，只是this的获取（get）过程，仅仅获取，不能让我们明确this的值具体是什么。<br>只有了解this的设置（set）过程，才能真正对this了如指掌。</p>
<h1 id="ok，那这个-GlobalThisValue-是什么值呢？"><a href="#ok，那这个-GlobalThisValue-是什么值呢？" class="headerlink" title="ok，那这个[[GlobalThisValue]]是什么值呢？"></a>ok，那这个[[GlobalThisValue]]是什么值呢？</h1><blockquote>
<p>Before it is evaluated, all ECMAScript code must be associated with a realm. Conceptually, a realm consists of a set of intrinsic objects, an ECMAScript global environment, all of the ECMAScript code that is loaded within the scope of that global environment, and other associated state and resources.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://tc39.es/ecma262/#sec-code-realms">JavaScript realm</a>，代表javascript程序执行的全局领域。领域realm的[[GlobalObject]]属性，即reaml的global object，<br>这个global object是宿主相关的，比如浏览器中的global object是window,node.js中的global object是node。<br>javascript程序执行的第一步就是宿主创建并且初始化领域realm:<a target="_blank" rel="noopener" href="https://tc39.es/ecma262/#sec-initializehostdefinedrealm"><code>InitializeHostDefinedRealm()</code></a> ，<br>包括 <code>SetRealmGlobalObject</code>，即设置global this，使用gloabal this创建全局环境Global Environment：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">InitializeHostDefinedRealm</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    create <span class="keyword">new</span> execution context;<span class="comment">//创建全局执行上下文</span></span><br><span class="line">    create <span class="built_in">global</span> object <span class="comment">//创建对象</span></span><br><span class="line">    <span class="built_in">this</span> = <span class="built_in">global</span> object <span class="comment">//设置global this</span></span><br><span class="line">    create <span class="keyword">new</span> Global Environment;<span class="comment">//创建全局环境</span></span><br><span class="line">    Global Environment.[[GlobalThisValue]] = <span class="built_in">this</span> <span class="comment">//设置[[GlobalThisValue]]</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因此，[[GlobalThisValue]]的值是javascript一开始就创建的领域Realm相关的全局对象：window，node等。</p>
<h1 id="那-ThisValue-呢？"><a href="#那-ThisValue-呢？" class="headerlink" title="那[[ThisValue]]呢？"></a>那[[ThisValue]]呢？</h1><p>this被认为复杂是因为其动态性，意思是this是在函数调用的时候才绑定的一个值，而不是代码静态绑定的。<br>而理解了javascript引擎如何处理函数后，又会发现this的动态绑定其实也很直观。</p>
<p>跟this一样，函数调用也是一个特殊的语法结构，引擎解析器在解析到函数调用时会转译为真正调用这个函数的内部方法：<br>例如函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add();</span><br><span class="line">foo.add(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>实际执行的是：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Call( add, null);</span><br><span class="line">Call( add, foo, <span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://tc39.es/ecma262/#sec-call"><code> Call ( F, V [ , argumentsList ] )</code></a>这个函数是规范中定义的抽象方法，<br>接受3个参数：</p>
<ol>
<li>调用的[函数]，</li>
<li>调用该函数的对象，即我们关心的this，</li>
<li>可选的参数列表</li>
</ol>
<p>其执行伪代码是这样的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Call ( F, thisArgument [ , argumentsList ] )&#123;</span><br><span class="line">    <span class="keyword">new</span> execution Context, <span class="comment">//创建执行上下文</span></span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Function</span> Environment,<span class="comment">//创建函数环境记录</span></span><br><span class="line">    push execution Context on Stack,<span class="comment">//压入执行上下文栈</span></span><br><span class="line">    OrdinaryCallBindThis(F, calleeContext, thisArgument )<span class="comment">//绑定this</span></span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    execute code</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中绑定this:<a target="_blank" rel="noopener" href="https://tc39.es/ecma262/#sec-ordinarycallbindthis"><code>OrdinaryCallBindThis</code></a>就是[[ThisValue]]的绑定规则，<br>其按照以下逻辑严格顺序执行：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">OrdinaryCallBindThis(F, calleeContext, thisArgument ):</span><br><span class="line">       <span class="keyword">if</span>( 箭头函数 ) <span class="keyword">return</span></span><br><span class="line">       <span class="keyword">else</span> <span class="keyword">if</span>( 严格模式 )&#123;</span><br><span class="line">           [[ThisValue]] = thisArgument</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="keyword">if</span>( thisArgument 是 <span class="literal">undefined</span> || <span class="literal">null</span>)&#123;</span><br><span class="line">               [[ThisValue]] = [[GlobalThisValue]]</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span>&#123;</span><br><span class="line">               [[ThisValue]] = thisArgument</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>这样看，[[ThisValue]]的取值可以说是很明了了。<br>那么用函数对象的apply，call调用的函数呢？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj.myFun.call(foo);</span><br><span class="line">obj.myFun.apply(foo,<span class="number">1</span>,<span class="number">2</span>);     </span><br></pre></td></tr></table></figure>
<p>实际执行的依旧是:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Call( obj.myFun, foo);</span><br><span class="line">Call( obj.myFun, foo, <span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>因此，call,apply的this绑定跟上文中的this绑定规则是统一的，一招鲜，很直观。</p>
<p>区别出现在function，用作构造函数的时候:<br>构造函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Bar();</span><br></pre></td></tr></table></figure>
<p>实际执行的是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Construct( Bar )</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://tc39.es/ecma262/#sec-construct"><code>Construct ( F [ , argumentsList [ , newTarget ] ] )</code></a>是规范中定义的构造函数调用的抽象方法。<br>处理构造函数时，[[ThisValue]]的绑定规则是:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (是构造函数)&#123;</span><br><span class="line">   thisArgument = &#123;&#125;;<span class="comment">//this = 新建对象</span></span><br><span class="line">   OrdinaryCallBindThis( F, calleeContext, thisArgument );<span class="comment">//调用绑定this</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>又回到普通函数的this绑定过程<code>OrdinaryCallBindThis</code>了，不过在调用之前新建了空对象{}作为thisArgument传入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">OrdinaryCallBindThis(F, calleeContext, thisArgument):</span><br><span class="line">       <span class="keyword">if</span>( 箭头函数 ) <span class="keyword">return</span></span><br><span class="line">       <span class="keyword">else</span> <span class="keyword">if</span>( 严格模式 )&#123;</span><br><span class="line">           [[ThisValue]] = thisArgument</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="keyword">if</span>( thisArgument 是 <span class="literal">undefined</span> || <span class="literal">null</span>)&#123;</span><br><span class="line">               [[ThisValue]] = [[GlobalThisValue]]</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span>&#123;</span><br><span class="line">               [[ThisValue]] = thisArgument</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>代入绑定规则里跑下来，构造函数的[[ThisValue]]={}</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>现在可以结束了。</p>
<p>总结一下，this只有两种情况：</p>
<ol>
<li>全局环境下的<code>[[GlobalThisValue]]</code></li>
<li>函数环境下的<code>[[ThisValue]]</code></li>
</ol>
<p><code>[[GlobalThisValue]]</code>就是Realm领域相关的global object，<br><code>[[ThisValue]]</code>则可以总结为通用规则:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">bindThis( thisArgument) :</span><br><span class="line">    <span class="keyword">if</span>( 箭头函数 ) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (构造函数)&#123;</span><br><span class="line">        [[ThisValue]] = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( 严格模式 )&#123;</span><br><span class="line">        [[ThisValue]] = thisArgument</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( thisArgument 是 <span class="literal">undefined</span> || <span class="literal">null</span>)&#123;</span><br><span class="line">            [[ThisValue]] = [[GlobalThisValue]]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            [[ThisValue]] = thisArgument</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>或者描述为:</p>
<ul>
<li>是箭头函数，则不绑定this</li>
<li>是构造函数，<code>&#123;&#125;</code></li>
<li>是通过call/apply调用，则<code>[[ThisValue]]</code> = 调用的第一个参数</li>
<li>作为对象方法的调用，则<code>[[ThisValue]]</code> = 该对象</li>
<li>非作为对象方法，而是纯粹的函数调用：<ul>
<li><code>strict mode</code>，则<code>[[ThisValue]]</code> = <code>undefined</code></li>
<li>非<code>strict mode</code>， 则<code>[[ThisValue]]</code> = <code>[[GlobalThisValue]]</code></li>
</ul>
</li>
</ul>
</div><div class="post-meta"><div class="post-meta__tags"></div><i class="icofont-tags"></i><a class="label default" href="/tags/this/">this</a></div></div><nav class="breadcrumb"><a class="extend prev" href="/2020/10/26/Front/Hexo/hexo%E5%B0%8F%E5%9D%91/"><i class="icofont-double-left"> </i>Hexo填坑小记</a><a class="extend next" href="/2018/10/26/Front/CSS/cheatsheet/center/center_in_css/">居中<i class="icofont-double-right"></i></a></nav></div><div id="search-container"><div class="padding" id="search-result"><div class="loading"><span> </span><span> </span><span> </span><span> </span><span> </span></div><div id="no-result"></div></div><label id="search-switcher" for="search-checkbox"><i class="icofont-close"></i></label></div></div><div class="col-12 col-md-3 static"><aside class="sidebar padding"><div class="local-search"><span class="sidebar-title">搜索</span><form class="form"><input class="search-input" type="search" name="" placeholder="search"></form></div></aside><aside class="sidebar padding toc-container"><span class="sidebar-title">TOC</span><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%8E-quot-%E5%85%B3%E9%94%AE%E5%AD%97-quot-%E8%BF%993%E4%B8%AA%E4%B8%AD%E6%96%87%E5%AD%97%E5%BC%80%E5%A7%8B"><span class="toc-number">1.</span> <span class="toc-text">从&quot;关键字&quot;这3个中文字开始</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%9D%A5%E4%BA%86%EF%BC%8CResolveThisBinding-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">问题来了，ResolveThisBinding()是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%8F%88%E6%9D%A5%E4%BA%86%EF%BC%8CExecution-Context%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">问题又来了，Execution Context是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ok-%E9%82%A3Environment%E5%8F%88%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.3.</span> <span class="toc-text">ok, 那Environment又是什么？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ok%EF%BC%8C%E9%82%A3%E8%BF%99%E4%B8%AA-GlobalThisValue-%E6%98%AF%E4%BB%80%E4%B9%88%E5%80%BC%E5%91%A2%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">ok，那这个[[GlobalThisValue]]是什么值呢？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%82%A3-ThisValue-%E5%91%A2%EF%BC%9F"><span class="toc-number">3.</span> <span class="toc-text">那[[ThisValue]]呢？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">总结</span></a></li></ol></aside><aside class="sidebar padding"><div class="categories"><a class="sidebar-title" href="/categories/">分类</a><ul class="tree"><li class="tree-item">
                            <input id="cky4ddg4x000ngohta59x4kx7" class="tree-checkbox" type="checkbox" aria-hidden="true" ></input>
                            <label class="tree-switcher" role="button" for="cky4ddg4x000ngohta59x4kx7"></label>
                            <a href="/categories/Android/">Android
                            <span class="count">1</span></a>
                            <ul class="subtree"><li class="tree-item">
                <a href="/categories/Android/Graddle/">Graddle<span class="count">1</span></a>
                </li></ul>
                            </li><li class="tree-item">
                            <input id="cky4ddg4z000ugoht7wva974d" class="tree-checkbox" type="checkbox" aria-hidden="true" ></input>
                            <label class="tree-switcher" role="button" for="cky4ddg4z000ugoht7wva974d"></label>
                            <a href="/categories/Front/">Front
                            <span class="count">5</span></a>
                            <ul class="subtree"><li class="tree-item">
                            <input id="cky4ddg5y0044goht6bbz7cgl" class="tree-checkbox" type="checkbox" aria-hidden="true" ></input>
                            <label class="tree-switcher" role="button" for="cky4ddg5y0044goht6bbz7cgl"></label>
                            <a href="/categories/Front/CSS/">CSS
                            <span class="count">2</span></a>
                            <ul class="subtree"><li class="tree-item">
                            <input id="cky4ddg66004zgohth62w7tbb" class="tree-checkbox" type="checkbox" aria-hidden="true" ></input>
                            <label class="tree-switcher" role="button" for="cky4ddg66004zgohth62w7tbb"></label>
                            <a href="/categories/Front/CSS/Cheatsheet/">Cheatsheet
                            <span class="count">2</span></a>
                            <ul class="subtree"><li class="tree-item">
                <a href="/categories/Front/CSS/Cheatsheet/Center/">Center<span class="count">1</span></a>
                </li><li class="tree-item">
                <a href="/categories/Front/CSS/Cheatsheet/Triangle/">Triangle<span class="count">1</span></a>
                </li></ul>
                            </li></ul>
                            </li><li class="tree-item">
                <a href="/categories/Front/Hexo/">Hexo<span class="count">1</span></a>
                </li><li class="tree-item">
                <a href="/categories/Front/Webpack/">Webpack<span class="count">2</span></a>
                </li></ul>
                            </li><li class="tree-item">
                            <input id="cky4ddg58001jgohtgcjo77pp" class="tree-checkbox" type="checkbox" aria-hidden="true" ></input>
                            <label class="tree-switcher" role="button" for="cky4ddg58001jgohtgcjo77pp"></label>
                            <a href="/categories/iOS/">iOS
                            <span class="count">26</span></a>
                            <ul class="subtree"><li class="tree-item">
                <a href="/categories/iOS/Cocoapods/">Cocoapods<span class="count">2</span></a>
                </li><li class="tree-item">
                <a href="/categories/iOS/Draw/">Draw<span class="count">1</span></a>
                </li><li class="tree-item">
                            <input id="cky4ddg5w003ogoht4kn2g4st" class="tree-checkbox" type="checkbox" aria-hidden="true" ></input>
                            <label class="tree-switcher" role="button" for="cky4ddg5w003ogoht4kn2g4st"></label>
                            <a href="/categories/iOS/Objective-C/">Objective-C
                            <span class="count">17</span></a>
                            <ul class="subtree"><li class="tree-item">
                            <input id="cky4ddg670055gohtfbx25yvn" class="tree-checkbox" type="checkbox" aria-hidden="true" ></input>
                            <label class="tree-switcher" role="button" for="cky4ddg670055gohtfbx25yvn"></label>
                            <a href="/categories/iOS/Objective-C/Essentials/">Essentials
                            <span class="count">10</span></a>
                            <ul class="subtree"><li class="tree-item">
                <a href="/categories/iOS/Objective-C/Essentials/Basic/">Basic<span class="count">6</span></a>
                </li><li class="tree-item">
                <a href="/categories/iOS/Objective-C/Essentials/NSObject/">NSObject<span class="count">4</span></a>
                </li></ul>
                            </li><li class="tree-item">
                <a href="/categories/iOS/Objective-C/Runtime/">Runtime<span class="count">7</span></a>
                </li></ul>
                            </li><li class="tree-item">
                            <input id="cky4ddg62004lgoht57b90zu8" class="tree-checkbox" type="checkbox" aria-hidden="true" ></input>
                            <label class="tree-switcher" role="button" for="cky4ddg62004lgoht57b90zu8"></label>
                            <a href="/categories/iOS/Persistence/">Persistence
                            <span class="count">3</span></a>
                            <ul class="subtree"><li class="tree-item">
                <a href="/categories/iOS/Persistence/Bundle/">Bundle<span class="count">1</span></a>
                </li><li class="tree-item">
                <a href="/categories/iOS/Persistence/Plist/">Plist<span class="count">1</span></a>
                </li><li class="tree-item">
                <a href="/categories/iOS/Persistence/Preferences/">Preferences<span class="count">1</span></a>
                </li></ul>
                            </li><li class="tree-item">
                            <input id="cky4ddg5x003xgohtaha32i59" class="tree-checkbox" type="checkbox" aria-hidden="true" ></input>
                            <label class="tree-switcher" role="button" for="cky4ddg5x003xgohtaha32i59"></label>
                            <a href="/categories/iOS/UIKit/">UIKit
                            <span class="count">3</span></a>
                            <ul class="subtree"><li class="tree-item">
                <a href="/categories/iOS/UIKit/Interface-Builder/">Interface Builder<span class="count">3</span></a>
                </li></ul>
                            </li></ul>
                            </li><li class="tree-item">
                            <input id="cky4ddg540019goht0qzabd7g" class="tree-checkbox" type="checkbox" aria-hidden="true" checked></input>
                            <label class="tree-switcher" role="button" for="cky4ddg540019goht0qzabd7g"></label>
                            <a href="/categories/Node-js/">Node-js
                            <span class="count">4</span></a>
                            <ul class="subtree"><li class="tree-item">
                            <input id="cky4ddg62004jgohtgiygcr5x" class="tree-checkbox" type="checkbox" aria-hidden="true" checked></input>
                            <label class="tree-switcher" role="button" for="cky4ddg62004jgohtgiygcr5x"></label>
                            <a href="/categories/Node-js/JavaScript/">JavaScript
                            <span class="count">2</span></a>
                            <ul class="subtree"><li class="tree-item">
                <a href="/categories/Node-js/JavaScript/Essentials/">Essentials<span class="count">1</span></a>
                </li><li class="tree-item">
                <a href="/categories/Node-js/JavaScript/Object/">Object<span class="count">1</span></a>
                </li></ul>
                            </li><li class="tree-item">
                <a href="/categories/Node-js/npm/">npm<span class="count">2</span></a>
                </li></ul>
                            </li><li class="tree-item">
                <a href="/categories/NSLog/">NSLog<span class="count">3</span></a>
                </li></ul></div><div class="tags"><a class="sidebar-title" href="/tags/">标签</a><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Center-in-CSS/" rel="tag">Center in CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NODE-PATH/" rel="tag">NODE_PATH</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NSObject/" rel="tag">NSObject</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Triangle-in-CSS/" rel="tag">Triangle in CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/class/" rel="tag">class</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocoapods/" rel="tag">cocoapods</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compiler/" rel="tag">compiler</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/draw/" rel="tag">draw</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dyld/" rel="tag">dyld</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/file/" rel="tag">file</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graddle/" rel="tag">graddle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/metaclass/" rel="tag">metaclass</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/object/" rel="tag">object</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prototype/" rel="tag">prototype</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/runtime/" rel="tag">runtime</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/self/" rel="tag">self</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/storyboard/" rel="tag">storyboard</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/super/" rel="tag">super</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this/" rel="tag">this</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a><span class="tag-list-count">2</span></li></ul></div><div class="links"><a class="sidebar-title" href="#">通道</a><ul class="link-list"><li class="link-list-item"><a class="link-list-link" target="_blank" rel="noopener" href="https://developer.apple.com/library">Apple Dev</a></li><li class="link-list-item"><a class="link-list-link" target="_blank" rel="noopener" href="http://stackoverflow.com/">StackOverflow</a></li><li class="link-list-item"><a class="link-list-link" target="_blank" rel="noopener" href="http://www.cocoawithlove.com/">CocoaWithLove</a></li><li class="link-list-item"><a class="link-list-link" target="_blank" rel="noopener" href="https://www.mikeash.com/">MikeAsh</a></li><li class="link-list-item"><a class="link-list-link" target="_blank" rel="noopener" href="http://nshipster.com/">NSHipster</a></li><li class="link-list-item"><a class="link-list-link" target="_blank" rel="noopener" href="https://www.objc.io/">Objc</a></li><li class="link-list-item"><a class="link-list-link" target="_blank" rel="noopener" href="https://copypastecharacter.com/all-characters">Web Unicode Characters</a></li></ul></div></aside></div></div></div><div class="grid"> <div class="row"> <div class="col-12 col-md-9"> <div class="footer"><div class="copyright"> <span>©</span><a href="/">Command+R.</a><span>Powered by</span><a class="label default" target="_blank" rel="noopener" href="https://hexo.io">Hexo.</a><span>Theme by</span><a class="label default" href="#">Locke. </a></div></div></div></div></div>
<script src="/js/local-search.js"></script>
</body></html>